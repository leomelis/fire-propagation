<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    <script type="text/javascript" src="raphael-min.js"></script>

    <!-- Fix rendering issue -->
    <style> svg {shape-rendering: crispEdges; } </style>

    <script>
        var paper;

        var paper_width = 320;
        var paper_height = 200;
        var dim = 10;
        var ox = 150;
        var oy = 100;
        var wind_strength = 4


        var colors = {
            "fire":"red",
            "firewall":"black",
            "tree":"yellow",
            "pine":"green"
        }



        function fix_y(y){
            return paper_height - y - dim;
        }

        function create_grid(paper_width, paper_height, dim){
            for(var i=0; i<paper_height+dim; i=i+dim){
                paper.path("M0," + i + "L"+paper_width+"," + i);
            }

            for(var i=0; i<paper_width+dim; i=i+dim){
                paper.path("M"+i+",0L"+i+","+paper_height);
            }
        }

        function create_square(x, y, dim, type){
            y = fix_y(y);

            var c = paper.rect(x, y, dim, dim);
            c.attr("fill", colors[type]);
        }

        function cuadrado(x, y, dim, type){
            for (i=-wind_strength*dim; i<wind_strength*dim+1; i=i+dim){
                for(j=-wind_strength*dim; j<wind_strength*dim+1; j=j+dim){
                    var c = paper.rect(x+j, y+i, dim, dim);
                    c.attr("fill", colors[type]);

                }
            }
        }

        // function propagate_fire(x, y, wind_strength, wind_direction){
        //     wind_direction = wind_direction*Math.PI/180;

        //     for(var i=0; i<wind_strength+1; i=i+1){
        //         nx = x+i*dim;
        //         nx_ = nx + dim/2;
        //         ny_ = Math.floor(Math.tan(wind_direction)*nx_/dim)*dim + y;

        //         create_square(nx, ny_, dim, "fire");
        //     }
        // }



        $(document).ready(function(){
            paper = Raphael(10, 50, paper_width, paper_height);

            // create_grid(paper_width, paper_height, 10);

            cuadrado(ox, oy, dim, "fire");
            create_square(ox, oy, dim, "firewall");
            // for (var i=wind_strength; i<wind_strength+1; i++){
            //     for(var j=wind_strength; j<wind_strength+1; j++){
            //         var c = paper.rect(x+i, y+i, dim, dim);
            //         c.attr("fill", colors[type])

            //     }
            // }




            // propagate_fire(10, 100, 20, 45);

            // create_square(x+0*dim, y, dim, "fire");
            // create_square(x+1+dim, y, dim, "fire");
            // create_square(x+2*dim, y, dim, "fire");
            // create_square(x+3*dim, y, dim, "fire");
            // create_square(x+4*dim, y, dim, "fire");




        });
    </script>
</head>
<body>
</body>
</html>